\usepackage{fontspec}
\setmainfont[Numbers=OldStyle, 
             Ligatures=Historic, 
             WordSpace={1,1.6,0.9},
             ItalicFeatures={Scale=0.96}]{Linux Libertine O}
%
\usepackage{selnolig}
\nolig{Th}{T|h} % suppress "Th" ligature globally
%
\def\crfill{\xleaders\hbox to .6em{\hss -\hss}\hfill}
\def\xtsh{\hbox to 2em plus 2pt{\crfill}}
\def\Tsk{\leaders\hrule width 1pt height 8.14pt depth -7.4pt\hskip .7em plus .5em minus .3em\thinspace}
\def\Usk#1{\hbox to #1{\leaders\hrule width 1pt height 14.14pt depth -13.6pt\hskip .5em plus .5em minus .2em}\thinspace}
\def\tsh{\leavevmode\kern .1em\null\nobreak\leaders\hrule width 1pt height .58ex depth -.42ex\hskip 2em plus 1em minus 1em\thinspace\allowbreak}
\def\tsk{\leavevmode\kern .1em\null\nobreak\leaders\hrule width 1pt height .58ex depth -.42ex\hskip 1em plus .5em minus .5em\thinspace\allowbreak}
\def\tsfill{\leavevmode\kern.04em\null\nobreak\leaders\hrule width 1pt height .58ex depth -.42ex\hfill}
%
\newfontfamily{\maguntia}{UnifrakturMaguntia}\DeclareTextFontCommand{\gothic}{\maguntia}
\newfontface{\egb}{EB Garamond Italic}%[Scale=0.9]
\newfontface{\zap}{Zapf Dingbats}[Scale=0.6]
%
\def\lqq{\leavevmode\rlap{“}\kern .6em}
%
\def\bnq{\break\null\quad}
\def\tspace{\kern 2.5pt}
%
\def\etp{\enlargethispage\baselineskip}
\def\etpp{\enlargethispage{2\baselineskip}}
%
\def\tighter#1{{\addfontfeature{LetterSpace=-4.0}#1}}
\def\tight#1{{\addfontfeature{LetterSpace=-2.0}#1}}
\def\s#1{{\addfontfeature{LetterSpace=6.0}\textsc{#1}}}
\def\ss#1{{\addfontfeature{LetterSpace=12.0}\textsc{#1}}}
\def\sss#1{{\addfontfeature{LetterSpace=32.0}\textsc{#1}}}
\def\smallit#1{{\fontsize{9.5}{14}\selectfont\textit{#1}}}
\def\i#1{\textit{#1}}
\def\g#1{{\small #1}} % for greek...
\def\ls#1{{\addfontfeature{LetterSpace=12.0}#1}}
\def\lss#1{{\addfontfeature{LetterSpace=16.0}#1}}
\def\lsss#1{{\addfontfeature{LetterSpace=32.0}#1}}
\def\lsv#1#2{{\addfontfeature{LetterSpace=#1}#2}}
\def\stick#1{\hbox to \hsize{#1}}
\def\stck#1{\hbox to \hsize{\tight{#1}}}
\def\stk#1{\hbox to \hsize{\tighter{#1}}}
% variations...
\def\Stick#1{\noindent\hbox to \hsize{\indent #1}}
\def\Stck#1{\noindent\hbox to \hsize{\tight{\indent #1}}}
%
\usepackage{relsize}
%
\def\et{{\raise0pt\hbox{\egb\&}}}
\def\etc{\et{\itshape c}.\@\ }
\long\def\pb{\bgroup\parfillskip 0pt\par\egroup\newpage\noindent}
%
\newcommand{\patch}[2][0pt]{\par\vfill\rightline{#2\vrule width 0pt depth #1}\eject}
\newcommand{\natch}[2][0pt]{\par\vskip#1\rightline{#2}\par\vfill\eject}
\long\def\catch#1 {\hbox to \hsize{\hfill #1}\par\vfill\eject\noindent}
%
\def\chap#1#2#3{\noindent\centerline{{\addfontfeature{LetterSpace=64.0}CHAP}.\quad
{\addfontfeature{LetterSpace=8.0}#1}.\vrule width 0pt height #2 depth #3}\par\kern-4pt}
\def\chapx#1#2#3{\noindent\centerline{#1\vrule width 0pt height #2 depth #3}\par\kern-4pt}
\def\boxstrut{\vrule width 0pt height 14pt depth 8pt}
\def\topstrut{\vrule width 0pt height 19pt}
\def\chapstrut{\vrule width 0pt height 24pt}
\def\chapstrutt{\vrule width 0pt height 36pt}
\def\tstrut{\vrule width 0pt height}
\def\ast{\hbox{\zap ❋}}
\def\fnast{\raise0.5ex\ast}
\def\vastfill#1{\fnast\xleaders\hbox to #1{\hss\fnast}\hfill}
\def\wastfill{\fnast\xleaders\hbox to 1.6em{\hss\fnast}\hfill}
\def\astfill{\ast\xleaders\hbox to 1em{\hss\ast}\hfill}
\def\starfill{\ast\xleaders\hbox to 1.6em{\hss\ast}\hfill}
\def\astvi{\hbox{\lower-2pt\hbox{\ast}\xleaders\hbox to
0.6em{\hss\lower-2pt\hbox{\ast}}\hskip 3.3em}}
\def\astv{\hbox{\fnast\xleaders\hbox to 0.6em{\hss\fnast}\hskip 2.8em}}
\def\nastv{\hbox{\fnast\xleaders\hbox to 0.5em{\hss\fnast}\hskip 2em}}
\def\astiv{\hbox{\fnast\xleaders\hbox to 0.6em{\hss\fnast}\hskip 2.1em}}
\def\wastiv{\hbox{\fnast\xleaders\hbox to 1em{\hss\fnast}\hskip 3em}}
\def\lowastiv{\hbox{\ast\xleaders\hbox to 1em{\hss\ast}\hskip 3em}}
\newcount\a
\def\astw#1{\a=0\loop\ifnum\a<#1 \advance\a by1 \fnast\repeat}
\def\astW#1{\a=0\loop\ifnum\a<#1 \advance\a by1 \raise2pt\hbox to .66em{\hss\ast\hss}\repeat}
\def\astWW#1{\a=0\loop\ifnum\a<#1 \advance\a by1 \raise1pt\hbox to .81em{\hss\ast\hss}\repeat}
%
% alt is for the interlineal alternatives in the Curses of Ernulphus
\def\alt#1#2{\hbox{\vbox to 4ex{\vss\openup-4pt\halign{##\cr\hss\scriptsize #2\hss\cr#1\cr}}}}
\def\c#1{\hbox to 0pt{\hss #1\hss}}
%
\usepackage{graphicx}
\usepackage{xspace}
\usepackage{marginnote}
\def\club{\small ♣︎}
\def\sick{\rlap{\quad\club}}
\def\sic{\marginnote{\club}\xspace}
%
\newcommand{\toby}{\textit{Toby}\xspace}
\newcommand{\trim}{\textit{Trim}\xspace}
\newcommand{\drslop}{Dr.~\textit{Slop}\xspace}
\newcommand{\slop}{\textit{Slop}\xspace}
\newcommand{\susannah}{\textit{Susannah}\xspace}
\newcommand{\fist}{☞\xspace}
\renewcommand{\fist}{\leavevmode\lower1.414pt\hbox{\includegraphics{manicule.pdf}}\xspace}
%
\setcounter{secnumdepth}{-1}
%
\usepackage{fancyhdr}
\fancyhf{}
\fancyhead[C]{[\hbox to 24pt{\hss\thepage\hss}]}
\renewcommand{\headrulewidth}{0pt}
%
\fancypagestyle{dedication}{\fancyhf{}
\fancyhead[C]{\lsss{DEDICATION}.}
\renewcommand{\headrulewidth}{0pt}}
%
\fancypagestyle{folio}{\fancyhf{}
\fancyhead[C]{[\hbox to 24pt{\hss\thepage\hss}]}
\renewcommand{\headrulewidth}{0pt}}
%
% for the missing pages in Vol 4.
\fancypagestyle{plusnine}{\fancyhf{}
\fancyhead[C]{[\quad \the\numexpr \thepage + 9\relax \quad]}
\renewcommand{\headrulewidth}{0pt}}
%
\renewcommand*\footnoterule{}
\renewcommand*{\thefootnote}{\ast} % \fnsymbol{footnote}}
\renewcommand*{\footnotesize}{\fontsize{8pt}{9pt}\selectfont}
\newcommand{\starnote}{\setcounter{footnote}{0}\footnote}
%
\usepackage{lettrine}
\newcommand\dropcap[3][]{\lettrine[findent=3pt, lraise=0.05, #1]{#2}{\lss{\large #3}}}
\newcommand\dropcaptight[3][]{\lettrine[findent=2pt, lraise=0.05,
#1]{#2}{{\addfontfeature{LetterSpace=3.0}\large #3}}}
\newcommand\initial[3][]{\lettrine[findent=5pt, lraise=0.07, loversize=0.05, #1]{#2}{}#3}
\usepackage[sc, tiny, center]{titlesec}
%
\usepackage[indent=12pt, skip=0.75\baselineskip plus 2pt]{parskip}
%
\global\catcode`\:=\active \gdef:{\thinspace\char`\: }
\global\catcode`\;=\active \gdef;{\thinspace\char`\; }
\global\catcode`\?=\active \gdef?{\thinspace\char`\? }
\global\catcode`\!=\active \gdef!{\thinspace\char`\! }
%
\overfullrule=2pt
